endpoints:
  - name: 'productData'
    url: 'https://<domain>/api/products/v2/products/<productID>/details?locale=en-us'
    fields:
      # Required fields
      - name: 'sku'
        path: 'id'
      - name: 'rootDomain'
        constantValue: 'thenorthface.com'
      - name: 'name'
        path: 'name'
      - name: 'brand'
        path: 'productJsonLd.brand.name'
      - name: 'currency'
        path: 'currency'
      - name: 'price'
        path: ''
      - name: 'imageUrls'
        path: 'gallery[*].src'
      - name: 'date'
        path: ''
      - name: 'time'
        path: ''
      - name: 'url'
        path: 'url'
      - name: 'mpn'
        path: 'productJsonLd.mpn'
      - name: 'availability'
        path: ''
      - name: 'averageCustomerReview'
        path: 'rating.score'
      - name: 'numberOfCustomerReviews'
        path: 'rating.reviewsCount'
      - name: 'attributes'
        path: 'attributes[*]'
      - name: 'description'
        path: "details[?(@.id=='productText')].data[*].text"
      - name: 'features'
        path: "details[?(@.id=='productFeatures')].data[*].label"
      - name: 'variants'
        path: ''
      - name: 'variantAttributes'
        path: ''
      - name: 'variantsAttributes'
        path: ''

      # Fields for the transform
      - name: 'breadcrumbs'
        path: 'breadcrumbs[*].label'
      - name: 'variantsData'
        path: 'variants[*]'
      - name: 'productDetails'
        path: "details[?(@.id=='productDetails')].data[*]"

  - name: 'ratingData'
    url: 'https://<domain>/api/products/v1/products/<productID>/reviews?paging.from=0&paging.size=6&sort=Newest&locale=en-us&filters=rating%3A5'
    fields:
      - name: 'starRatingDistribution'
        path: 'results[0].rollup.ratingHistogram'